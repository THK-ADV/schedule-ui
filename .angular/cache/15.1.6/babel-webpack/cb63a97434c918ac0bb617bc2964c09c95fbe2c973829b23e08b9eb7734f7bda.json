{"ast":null,"code":"import { MatSort } from '@angular/material/sort';\nimport { MatLegacyPaginator as MatPaginator } from '@angular/material/legacy-paginator';\nimport { MatLegacyTableDataSource as MatTableDataSource } from '@angular/material/legacy-table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/legacy-form-field\";\nimport * as i3 from \"@angular/material/legacy-input\";\nimport * as i4 from \"@angular/material/legacy-button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/legacy-tooltip\";\nimport * as i7 from \"@angular/material/legacy-table\";\nimport * as i8 from \"@angular/material/sort\";\nimport * as i9 from \"@angular/material/legacy-paginator\";\nimport * as i10 from \"../../structure/directives/mat-table-responsive/schd-mat-table-responsive.directive\";\nfunction TableComponent_ng_container_4_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const column_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(column_r5.title);\n  }\n}\nfunction TableComponent_ng_container_4_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r9 = ctx.$implicit;\n    const column_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r7.tableContent(element_r9, column_r5.attr), \" \");\n  }\n}\nfunction TableComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 10);\n    i0.ɵɵtemplate(1, TableComponent_ng_container_4_th_1_Template, 2, 1, \"th\", 5);\n    i0.ɵɵtemplate(2, TableComponent_ng_container_4_td_2_Template, 2, 1, \"td\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const column_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"matColumnDef\", column_r5.attr);\n  }\n}\nfunction TableComponent_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 12);\n  }\n}\nfunction TableComponent_td_7_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function TableComponent_td_7_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const element_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.edit(element_r11));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"edit\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TableComponent_td_7_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function TableComponent_td_7_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const element_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.delete(element_r11));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TableComponent_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵlistener(\"click\", function TableComponent_td_7_Template_td_click_0_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵtemplate(1, TableComponent_td_7_button_1_Template, 3, 0, \"button\", 15);\n    i0.ɵɵtemplate(2, TableComponent_td_7_button_2_Template, 3, 0, \"button\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.edit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.delete);\n  }\n}\nfunction TableComponent_tr_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 19);\n  }\n}\nfunction TableComponent_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 20);\n    i0.ɵɵlistener(\"click\", function TableComponent_tr_9_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const row_r21 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.onSelect(row_r21));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport const nestedObjectPropertyAccessor = (obj, prop) => prop.split('.').reduce((o, p) => {\n  // @ts-ignore\n  return o && o[p];\n}, obj);\nexport class TableComponent {\n  set data(data$) {\n    this.updateDataSourceWithData(data$);\n  }\n  constructor() {\n    this.filterHint = 'Filter';\n    this.dataSource = new MatTableDataSource();\n    this.displayedColumns = [];\n    this.updateDataSourceWithData = data$ => {\n      this.sub = data$.subscribe(data => {\n        if (data) {\n          this.dataSource.data = data;\n          this.triggerSort();\n        } else {\n          this.dataSource.data = [];\n        }\n      });\n    };\n    this.initDisplayedColumns = () => {\n      this.displayedColumns = this.columns.map(_ => _.attr);\n      if (this.edit || this.delete) {\n        this.displayedColumns.push('action');\n      }\n    };\n    this.initDataSource = () => {\n      this.dataSource.sortingDataAccessor = this.sortingDataAccessor;\n      if (this.useTableContentForFiltering) {\n        this.dataSource.filterPredicate = (obj, filter) => Object.keys(obj).some(k => this.tableContent(obj, k).toLowerCase().includes(filter));\n      }\n    };\n    this.initFilterHints = () => {\n      const filterAttrs = this.filterAttrs ?? this.columns.filter(a => !a.attr.includes('.')).map(a => a.title);\n      const activeFilter = filterAttrs.join(', ');\n      if (activeFilter) {\n        this.filterHint = `Filtern nach: ${activeFilter}`;\n      }\n    };\n    this.triggerSort = () => {\n      if (this.sort && this.matSort) {\n        this.matSort.active = this.sort.active;\n        this.matSort.direction = this.sort.direction;\n        this.matSort.sortChange.emit(this.sort);\n      }\n    };\n    this.onSelect = a => this.select && this.select(a);\n    this.applyFilter = event => {\n      const filterValue = event.target.value;\n      this.dataSource.filter = filterValue.trim().toLowerCase();\n    };\n  }\n  ngOnInit() {\n    this.initDisplayedColumns();\n    this.initDataSource();\n    this.initFilterHints();\n  }\n  ngAfterViewInit() {\n    if (this.paginator) {\n      this.dataSource.paginator = this.paginator;\n    }\n    if (this.matSort) {\n      this.dataSource.sort = this.matSort;\n    }\n  }\n  ngOnDestroy() {\n    this.sub?.unsubscribe();\n  }\n}\nTableComponent.ɵfac = function TableComponent_Factory(t) {\n  return new (t || TableComponent)();\n};\nTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TableComponent,\n  selectors: [[\"schd-table\"]],\n  viewQuery: function TableComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatSort, 7);\n      i0.ɵɵviewQuery(MatPaginator, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.matSort = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n    }\n  },\n  inputs: {\n    columns: \"columns\",\n    pageSizeOptions: \"pageSizeOptions\",\n    useTableContentForFiltering: \"useTableContentForFiltering\",\n    sortingDataAccessor: \"sortingDataAccessor\",\n    tableContent: \"tableContent\",\n    edit: \"edit\",\n    delete: \"delete\",\n    select: \"select\",\n    sort: \"sort\",\n    filterAttrs: \"filterAttrs\",\n    data: \"data\"\n  },\n  decls: 11,\n  vars: 7,\n  consts: [[\"matInput\", \"\", 3, \"placeholder\", \"keyup\"], [1, \"mat-elevation-z2\"], [\"mat-table\", \"\", \"schdMatTableResponsive\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"matColumnDef\", \"action\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"click\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 3, \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"pageSizeOptions\"], [3, \"matColumnDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-cell\", \"\", 3, \"click\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Bearbeiten\", \"matTooltipPosition\", \"left\", 3, \"click\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", \"color\", \"warn\", \"matTooltip\", \"L\\u00F6schen\", \"matTooltipPosition\", \"right\", 3, \"click\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Bearbeiten\", \"matTooltipPosition\", \"left\", 3, \"click\"], [\"mat-stroked-button\", \"\", \"color\", \"warn\", \"matTooltip\", \"L\\u00F6schen\", \"matTooltipPosition\", \"right\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"click\"]],\n  template: function TableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-form-field\")(1, \"input\", 0);\n      i0.ɵɵlistener(\"keyup\", function TableComponent_Template_input_keyup_1_listener($event) {\n        return ctx.applyFilter($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"table\", 2);\n      i0.ɵɵtemplate(4, TableComponent_ng_container_4_Template, 3, 1, \"ng-container\", 3);\n      i0.ɵɵelementContainerStart(5, 4);\n      i0.ɵɵtemplate(6, TableComponent_th_6_Template, 1, 0, \"th\", 5);\n      i0.ɵɵtemplate(7, TableComponent_td_7_Template, 3, 2, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(8, TableComponent_tr_8_Template, 1, 0, \"tr\", 7);\n      i0.ɵɵtemplate(9, TableComponent_tr_9_Template, 1, 0, \"tr\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"mat-paginator\", 9);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"placeholder\", ctx.filterHint);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns)(\"matHeaderRowDefSticky\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"pageSizeOptions\", ctx.pageSizeOptions);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.MatLegacyFormField, i3.MatLegacyInput, i4.MatLegacyButton, i5.MatIcon, i6.MatLegacyTooltip, i7.MatLegacyTable, i7.MatLegacyHeaderCellDef, i7.MatLegacyHeaderRowDef, i7.MatLegacyColumnDef, i7.MatLegacyCellDef, i7.MatLegacyRowDef, i7.MatLegacyHeaderCell, i7.MatLegacyCell, i7.MatLegacyHeaderRow, i7.MatLegacyRow, i8.MatSort, i8.MatSortHeader, i9.MatLegacyPaginator, i10.SchdMatTableResponsiveDirective],\n  styles: [\"@media (max-width: 768px){.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:auto;position:sticky;top:0;z-index:2}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;padding:1rem .5rem;justify-content:space-around}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%] > .mat-sort-header-container[_ngcontent-%COMP%]{padding-left:15px}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:not([mat-sort-header]), .mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   th.mat-header-cell.mat-sort-header-disabled[_ngcontent-%COMP%], .mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   th.mat-header-cell.mat-column-actions[_ngcontent-%COMP%]{display:none}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:auto}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:not(.mat-column-action){display:grid;grid-template-columns:50% 50%;padding:.5rem;text-align:right;word-break:break-word}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:not(.mat-column-action) > *[_ngcontent-%COMP%]{grid-column:2}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:not(.mat-column-action):before{content:attr(data-column-name);text-align:left}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   td.mat-column-action[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:0 .5rem}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   td.mat-column-action[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:.5rem 0}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%]:last-of-type{border:none}.mat-table[schdMatTableResponsive][_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(:last-of-type)   td[_ngcontent-%COMP%]:last-of-type{border-bottom:.5rem solid #fafafa}.mat-card[_ngcontent-%COMP%]   .mat-table[schdMatTableResponsive][_ngcontent-%COMP%], .mat-expansion-panel[_ngcontent-%COMP%]   .mat-table[schdMatTableResponsive][_ngcontent-%COMP%]{border:.5rem solid #fafafa}}@media (min-width: 769px){table.mat-table[_ngcontent-%COMP%]{display:table;width:100%}}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}