{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FilterOptionComponent } from '../filter-option/filter-option.component';\nimport { describeExamReg, describeLanguage, describeLecturer } from '../../utils/describe';\nimport { formatLong as describeCourse } from '../../models/course-type';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./schedule-filter.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/legacy-button\";\nimport * as i4 from \"../filter-option/filter-option.component\";\nexport class FilterComponent {\n  constructor(service) {\n    this.service = service;\n    this.onSearch = new EventEmitter();\n    this.onReset = new EventEmitter();\n    this.selections = {};\n    this.semesterIndices = [];\n    this.currentTeachingUnits = [];\n    this.currentCourses = [];\n    this.currentLecturer = [];\n    this.currentStudyProgramWithExam = [];\n    this.currentLanguages = [];\n    this.currentCourseTypes = [];\n    this.displayL = describeLecturer;\n    this.displayER = describeExamReg;\n    this.displayLang = describeLanguage;\n    this.displayCourseType = describeCourse;\n    this.displayTU = tu => tu.label;\n    this.displaySI = si => si.toString();\n    this.displayC = c => `${c.course.subModule.label} (${c.lecturer.map(_ => _.lastname).join(', ')})`;\n    this.selectedTU = tu => {\n      this.selections.teachingUnit = tu;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedER = er => {\n      this.selections.examReg = er;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedSI = si => {\n      this.selections.semesterIndex = si;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedC = c => {\n      this.selections.course = c;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedL = l => {\n      this.selections.lecturer = l;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedLang = lang => {\n      this.selections.language = lang;\n      this.service.updateFilters(this.selections);\n    };\n    this.selectedCourseType = ct => {\n      this.selections.courseType = ct;\n      this.service.updateFilters(this.selections);\n    };\n    this.search = () => this.onSearch.emit(this.currentCourses);\n    this.reset = () => {\n      this.filterComponents.forEach(a => a.reset());\n      this.service.updateFilters({});\n      this.onReset.emit();\n    };\n  }\n  ngOnInit() {\n    this.sub = this.service.fetchData(this.semester.id).subscribe(f => {\n      this.semesterIndices = f.semesterIndices;\n      this.currentTeachingUnits = f.teachingUnits;\n      this.currentCourses = f.courses;\n      this.currentStudyProgramWithExam = f.studyProgramsWithExam;\n      this.currentLecturer = f.lecturers;\n      this.currentLanguages = f.languages;\n      this.currentCourseTypes = f.courseTypes;\n      this.onSearch.emit(f.courses);\n    });\n  }\n  ngOnDestroy() {\n    this.sub?.unsubscribe();\n  }\n}\nFilterComponent.ɵfac = function FilterComponent_Factory(t) {\n  return new (t || FilterComponent)(i0.ɵɵdirectiveInject(i1.ScheduleFilterService));\n};\nFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FilterComponent,\n  selectors: [[\"schd-filter\"]],\n  viewQuery: function FilterComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(FilterOptionComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.filterComponents = _t);\n    }\n  },\n  inputs: {\n    semester: \"semester\"\n  },\n  outputs: {\n    onSearch: \"onSearch\",\n    onReset: \"onReset\"\n  },\n  decls: 13,\n  vars: 21,\n  consts: [[3, \"title\", \"display\", \"values\", \"onSelect\"], [1, \"buttonRow\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"]],\n  template: function FilterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"form\")(3, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_3_listener($event) {\n        return ctx.selectedTU($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_4_listener($event) {\n        return ctx.selectedER($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_5_listener($event) {\n        return ctx.selectedSI($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_6_listener($event) {\n        return ctx.selectedCourseType($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_7_listener($event) {\n        return ctx.selectedC($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_8_listener($event) {\n        return ctx.selectedL($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"schd-filter-option\", 0);\n      i0.ɵɵlistener(\"onSelect\", function FilterComponent_Template_schd_filter_option_onSelect_9_listener($event) {\n        return ctx.selectedLang($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 1)(11, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function FilterComponent_Template_button_click_11_listener() {\n        return ctx.reset();\n      });\n      i0.ɵɵtext(12, \"Zur\\u00FCcksetzen\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"title\", \"Lehreinheit\")(\"display\", ctx.displayTU)(\"values\", ctx.currentTeachingUnits);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Studiengang (mit PO)\")(\"display\", ctx.displayER)(\"values\", ctx.currentStudyProgramWithExam);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Fachsemester\")(\"display\", ctx.displaySI)(\"values\", ctx.semesterIndices);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Veranstaltungstyp\")(\"display\", ctx.displayCourseType)(\"values\", ctx.currentCourseTypes);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Veranstaltung\")(\"display\", ctx.displayC)(\"values\", ctx.currentCourses);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Dozent\")(\"display\", ctx.displayL)(\"values\", ctx.currentLecturer);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Sprache\")(\"display\", ctx.displayLang)(\"values\", ctx.currentLanguages);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i3.MatLegacyButton, i4.FilterOptionComponent],\n  styles: [\"form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:flex-start;align-content:center;height:60px}.buttonRow[_ngcontent-%COMP%]{margin:30px 0 10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:start;align-items:flex-start;align-content:center;height:60px}@media (max-width: 949px){form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:flex-start;align-content:center;height:60px;margin-bottom:40px}}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}